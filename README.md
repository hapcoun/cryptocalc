# Cryptocurrency API

## Описание задачи:
Необходимо разработать мини-приложение — калькулятор для сравнения цен криптовалют. Приложение должно получать актуальные курсы криптовалют из стороннего API, сохранять их в локальную базу данных и предоставлять пользователю возможность расчета стоимости на основе введенного количества криптовалюты.
Условия задания:

1.	Реализовать REST API для следующих операций:
      Получение списка поддерживаемых криптовалют и их текущих курсов.
      Расчет стоимости введенного количества криптовалюты в выбранной фиатной валюте.
      Обновление курсов криптовалют в локальной базе данных.


2.	Структура данных для хранения информации:
      - cryptocurrency (таблица для криптовалют):
      - id (уникальный идентификатор),
      - symbol (например, BTC, ETH),
      - name (название криптовалюты, например, Bitcoin),
      - price_usd (текущая цена в долларах США),
      - updated_at (дата последнего обновления курса).


3.	Функционал API:
      - GET /cryptocurrencies — получение списка всех криптовалют с их курсами.
      - GET /cryptocurrencies/{symbol} — получение информации о криптовалюте по её символу (symbol).
      - POST /cryptocurrencies/calculate — расчет стоимости криптовалюты в фиатной валюте.


4.	Требования:
   - Использовать нативный PHP или PHP-фреймворк Yii2.
   - Для хранения данных использовать PostgreSQL.
   - Подключиться к одному из публичных API для получения курсов криптовалют (например, CoinGecko API, CoinMarketCap API или другой доступный).
   - Локальная база данных должна обновляться с актуальными данными при вызове метода PUT /cryptocurrencies/update.
   - Для реализации расчетов использовать данные, хранящиеся в локальной БД (кэширование данных).


5.	Реализовать кэширование данных с помощью Memcached или Redis.


6.	Добавить опцию расчета стоимости криптовалюты в различных фиатных валютах (EUR, GBP и т.д.).


## Стек технологий

- PHP 8.2
- Yii2 Framework
- PostgreSQL
- Docker

## Запуск проекта в Docker

### 1. Установка Docker и Docker Compose

Убедитесь, что у вас установлены [Docker](https://www.docker.com/get-started) и [Docker Compose](https://docs.docker.com/compose/install/).

### 2. Клонирование репозитория

Клонируйте репозиторий с проектом:

```bash
git clone https://github.com/hapcoun/cryptocalc.git
cd cryptocalc
```

### 3. Запустите контейнеры с помощью команды:

```bash
docker-compose up -d
```

### 4. Выполните миграции для создания необходимых таблиц в базе данных:

```bash
docker-compose exec php yii migrate
```

## Методы API

**Получение списка криптовалют**

GET /cryptocurrencies

Ответ
```json
{
   "pagination": {
      "totalCount": 200,
      "pageSize": 100,
      "page": 1,
      "pageCount": 2
   },
   "items": [
      {"id": 1, "symbol": "BTC", "name": "Bitcoin", "price_usd": 50000},
      {"id": 2, "symbol": "ETH", "name": "Ethereum", "price_usd": 3000}
   ]
}
```

**Получение информации о криптовалюте**

GET /cryptocurrencies/{symbol}

Ответ
```json
{
  "id": 1,
  "symbol": "BTC",
  "name": "Bitcoin",
  "price_usd": 50000
}
```

**Расчет стоимости криптовалюты**

POST /cryptocurrencies/calculate

Тело запроса
```json
{
   "symbol": "BTC",
   "amount": 2,
   "currency": "USD"
}
```

Ответ
```json
{
  "symbol": "BTC",
  "amount": 2,
  "currency": "USD"
}
```

**Обновление курсов криптовалют**

PUT /cryptocurrencies/update

Ответ
```json
{
  "status": "success"
}
```